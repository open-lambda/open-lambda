[package]
name = "wasm-worker"
version = "0.1.0"
authors = ["Kai Mast <kaimast@cs.wisc.edu>"]
edition = "2018"

[dependencies]
tokio = { version="1", features=["net", "rt-multi-thread", "macros"] }
hyper = { version="0.14", features=["server", "http1", "runtime", "stream"] }
futures-util = { version="0.3" }
wasmer = { git="ssh://git@github.com/kaimast/wasmer.git", branch="async", default-features=false, features=["compiler", "async"] }
wasmer-compiler-cranelift = { git="ssh://git@github.com/kaimast/wasmer.git", branch="async", optional=true }
wasmer-compiler-llvm = { git="ssh://git@github.com/kaimast/wasmer.git", branch="async" }
wasmer-engine-native = { git="ssh://git@github.com/kaimast/wasmer.git", branch="async" }
wasmer-vm = { git="ssh://git@github.com/kaimast/wasmer.git", branch="async" }
pretty_env_logger = { version="0.4" }
log = "0.4"
dashmap = "4"
bincode = "1"
open-lambda-protocol = { git="ssh://git@github.com/kaimast/lambda-store.git" }
lambda-store-client = { git="ssh://git@github.com/kaimast/lambda-store.git", default-features=false, features=[] }
async-wormhole = "0.3"

[features]
default = []
cranelift = ["wasmer-compiler-cranelift"]

[profile.release]
debug = true
opt-level = 3
lto = true
